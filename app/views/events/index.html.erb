<div class="container">
  <div class="row justify-content-center">
    <div class="col-sm-8">
      <%= form_tag events_path, method: :get do %>
        <%= text_field_tag :query,
          params[:query],
          class: "form-control",
          placeholder: "Find an event"%>
        <%= submit_tag "Search", class: "btn btn-primary" %>
      <% end %>

      <div>
        <% @events.each do |event| %>
          <h4><%= event.event_name %></h4>
          <p><%= event.event_descritpion %></p>
          <% if event.favourites.exists?(user_id: current_user.id, event_id: event.id, id: event.favourites.ids) %>
            <%= link_to favourite_path(event_id: event.id, user_id: current_user.id, id: event.favourites.ids), method: :delete, remote: true, class:"like-btn" do %>
               <i class="fas fa-star fa-3x" id= "star-on"></i>
            <% end %>
          <% else %>
            <%= form_for(@favourite) do |f| %>
              <%= f.hidden_field :user_id, value: current_user.id %>
              <%= f.hidden_field :event_id, value: event.id %>
              <%= f.button :submit, class: 'favourite-star' do %>
                <i class="far fa-star fa-3x" id= "star-off"></i>
              <% end %>
            <% end %>
          <% end %>
        <% end %>
      </div>
    </div>
  </div>
</div>
